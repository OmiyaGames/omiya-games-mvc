<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Controller | Template Unity Package documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Controller | Template Unity Package documentation ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="controller">Controller</h1>

<p>Controllers in the Model-View-Controller code pattern are scripts responsible for defining actions that manipulate the data held in <a href="https://omiyagames.github.io/omiya-games-mvc/manual/model.html">models</a>.  The <a href="https://omiyagames.github.io/omiya-games-mvc/manual/view.html">view</a> scripts later uses these manipulated data as reference to update its display.  In this MVC package, controllers are &quot;soft&quot; enforced: no interfaces or abstract classes exists to enforce this part of the pattern.  Nonetheless, with the help of <a href="https://omiyagames.github.io/omiya-games-mvc/manual/model.html#model-factory"><code>ModelFactory</code></a>, it should be an easy pattern to enforce!</p>
<h2 id="recommended-convention">Recommended Convention</h2>
<p>Controllers are typically <code>MonoBehaviour</code> attached to a scene&#39;s GameObject with at least <code>void Awake()</code> method defined to create model, and setup a model.  Critically, controller&#39;s main purpose is to assign methods to the delegates of a model.</p>
<pre><code class="lang-cs">using OmiyaGames.MVC;
using UnityEngine;

public class CustomController : MonoBehaviour
{
    CustomModel model;

    [SerializeField]
    string firstText = &quot;First!&quot;;

    // Using Awake() so model is created before Start()
    void Awake()
    {
        // Create the CustomModel
        model = ModelFactory.Create&lt;CustomModel&gt;();

        // Setup initial data of the model
        model.text = firstText;
        model.ChangeText = (source, newText) =&gt; model.text = newText;
    }

    void OnDestroy()
    {
        // (Optional) Destroy the CustomModel
        ModelFactory.Release&lt;CustomModel&gt;();
        model = null;
    }
}
</code></pre><p>Controllers may also hold serialized references to both in-scene and in-project assets.  Typically, this is used to assign the initial variables of a model, but there may be other uses as well where this might be important.</p>
<pre><code class="lang-cs">public class CustomController : MonoBehaviour
{
    CustomModel model;

    [SerializeField]
    Sprite deadIcon;
    [SerializeField]
    ParticleSystem explosionPrefab;

    void Awake()
    {
        // Setup initial data of the model
        model = ModelFactory.Create&lt;CustomModel&gt;();
        model.deadIcon = deadIcon;
        model.explosion = explosionPrefab;
    }
}
</code></pre><h2 id="helper-delegates">Helper Delegates</h2>
<p>The <code>Controller</code> static class contains a few useful delegate templates defined:</p>
<pre><code class="lang-cs">public static class Controller
{
    public delegate void EventBase(object source);
    public delegate void EventBase&lt;T&gt;(object source, T arg);
    public delegate void EventBaseMulti&lt;T&gt;(object source, params T[] args);
}
</code></pre><p>These delegates can be used for listening to events.  The <code>source</code> is the object calling the function, and <code>arg(s)</code> is the supplied argument (recommended: have <code>arg&#39;s</code> type be a class that extends <code>System.EventArgs</code>.)</p>
<h2 id="differences-from-views">Differences From Views</h2>
<p>The fact that both controllers and views can change a model&#39;s delegates makes the differences between views and controllers rather blurry.  While it will be up to the developers of the project to establish their own boundaries on what views and controllers can and can&#39;t do, this documenter recommends the following rule:</p>
<ul>
<li>Controllers should apply behavior to delegates that changes the data in the model.</li>
<li>Views should <em>not</em> change the model&#39;s data, unless through a delegate that a controller has already defined.</li>
<li>Views should, instead, apply behavior to delegates that only affects the visuals of the game.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/OmiyaGames/omiya-games-mvc/blob/main/Documentation~/manual/controller.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright © 2020 Omiya Games
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
